<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/account-layout}">
<head>
    <meta charset="UTF-8">
    <title>ShoPP</title>
</head>
<body>
<div layout:fragment="content" class="inner split account account__card">
    <div th:replace="fragments/general-account.html :: content-side"></div>

    <div class="split-main">
        <div class="split-header">
            <h2 class="split-header--title">Thẻ tín dụng/Ghi nợ</h2>
            <button data-id="create-card" class="js-modal btn btn__primary split-header--add"><i
                    class="icon icon__left fas fa-plus"></i>Thêm thẻ mới
            </button>
        </div>
        <ul class="account-card">
            <li class="account-card-item">
                <p class="account-card-item--pic pic"><img src="/img/common/icon-master-card.png" alt=""></p>
                <p class="account-card-item--name">VISA</p>
                <p class="account-card-item--number">**** **** **** 1234</p>
                <div class="account-card-item--action">
                    <a href="#" class="account-card-item--link">Xóa</a>
                </div>
            </li>
            <li class="account-card-item">
                <p class="account-card-item--pic pic"><img src="/img/common/icon-visa.png" alt=""></p>
                <p class="account-card-item--name">Master Card</p>
                <p class="account-card-item--number">**** **** **** 9999</p>
                <div class="account-card-item--action">
                    <a href="#" class="account-card-item--link">Xóa</a>
                </div>
            </li>
        </ul>
    </div>
</div>
<div layout:fragment="modal" id="create-card" class="modal2-container">
    <form th:object="${card}" th:action="@{/card}" method="post" class="modal2 modal2__card">
        <div class="modal2-header">
            <h3>Thêm thẻ</h3>
        </div>
        <div action="" class="modal2-body modal2-form modal2-form__card-create">
            <div class="modal2-input-container">
                <input th:field="*{fullname}" class="modal2-input modal2-input__name" type="text"
                       placeholder="Họ tên trên thẻ">
                <p th:if="${#fields.hasErrors('fullname')}" class="error">Uwu uuuu</p>
            </div>
            <div class="modal2-input-container">
                <input th:field="*{number}" class="modal2-input modal2-input__number" placeholder="Số thẻ">
            </div>
            <div class="modal2-input-container modal2-input-container__card-choose">
                <select id="select-card" class="d-none" th:field="*{type}">
                    <option th:each="payType : ${paymentTypes}" th:value="${payType}"
                            th:text="${payType.displayValue}"></option>
                </select>
                <th:block th:each="payType : ${paymentTypes}">
                    <p th:attr="data-value=${payType}"  th:switch="${payType}" class="pic">
                        <img th:case="${T(com.apt.p2p.entity.CardType).VISA}" src="/img/common/icon-visa.png" alt="">
                        <img th:case="${T(com.apt.p2p.entity.CardType).MASTER_CARD}"
                             src="/img/common/icon-master-card.png" alt="">
                    </p>
                </th:block>
            </div>
            <div class="modal2-input-container">
                <input th:field="*{due}" type="date" class="modal2-input modal2-input__date" placeholder="Ngày hết hạn">
                <input th:field="*{cvv}" class="modal2-input modal2-input__CVV" placeholder="Mã CVV">
            </div>
            <div class="modal2-input-container">
                <input th:field="*{addressRegister}" class="modal2-input modal2-input__address" type="text"
                       placeholder="Địa chỉ hóa đơn">
            </div>
            <div class="modal2-input-container">
                <input th:field="*{postalCode}" class="modal2-input modal2-input__postal" placeholder="Potal code">
            </div>
        </div>
        <div class="modal2-footer">
            <button type="button" class="js-close modal2-footer--back btn btn__white">TRỞ LẠI</button>
            <button type="submit" class="js-close modal2-footer--submit btn btn__primary">Hoàn Thành</button>
        </div>
    </form>
</div>

<script layout:fragment="script">
    $('.modal2-input__card-choose .pic').on('click', function () {
        $('.modal2-input__card-choose .pic').removeClass('active');
        $(this).addClass('active');
        $('select#select-card').val(this.dataset.value).change();
    })
</script>
</body>
</html>