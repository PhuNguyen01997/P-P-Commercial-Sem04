<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/account-layout}">
<head>
    <meta charset="UTF-8">
    <title>ShoPP</title>
</head>
<body>
<div layout:fragment="content" class="inner split order-detail">
    <div th:replace="fragments/general-account.html :: content-side"></div>

    <div class="split-main order-detail-main">
        <div class="order-detail-header">
            <a class="order-detail-header--back" href="#"><i class="fas fa-angle-left mr10"></i>Back</a>
            <p class="order-detail-header--id">
                <span>Order ID:</span>
                <span th:text="${order.id}">[Order Id]</span>
            </p>
            <p th:text="${order.currentStatus.name}" class="order-detail-header--status">[Order Status]</p>
        </div>
        <div class="order-detail-status">
            <div class="order-step">
                <div class="order-step--item"
                     th:each="status: ${statusList}"
                     th:if="${(status.id != 2) || (status.id == 2 && order.methodPayment)}"
                     th:classappend="${order.currentStatus.id > status.id ? 'success' : (order.currentStatus.id == status.id ? 'current' : '')}">
                    <p class="order-step--icon circle">
                        <i th:class="${status.getIconUrl()}"></i>
                    </p>
                    <p class="order-step--status"
                       th:text="${order.currentStatus.id > status.id ? status.doneName : status.name}"></p>
                    <th:block th:if="order.currentStatus.id > status.id">
                        <p th:text="${statusMapStatusHistory.get(status.id)}" class="order-step--time">[Order History Date]</p>
                    </th:block>
                </div>
                <!--                <div class="order-step&#45;&#45;item success">-->
                <!--                    <p class="order-step&#45;&#45;icon circle">-->
                <!--                        <i class="far fa-file-alt"></i>-->
                <!--                    </p>-->
                <!--                    <p class="order-step&#45;&#45;status">Đơn hàng đã đặt</p>-->
                <!--                    <p class="order-step&#45;&#45;time">11:14 11:11:2021</p>-->
                <!--                </div>-->
                <!--                <div class="order-step&#45;&#45;item success">-->
                <!--                    <p class="order-step&#45;&#45;icon circle">-->
                <!--                        <i class="fas fa-dollar-sign"></i>-->
                <!--                    </p>-->
                <!--                    <p class="order-step&#45;&#45;status">Đơn hàng dã thanh toán ($99.99)</p>-->
                <!--                    <p class="order-step&#45;&#45;time">11:14 11:11:2021</p>-->
                <!--                </div>-->
                <!--                <div class="order-step&#45;&#45;item success">-->
                <!--                    <p class="order-step&#45;&#45;icon circle">-->
                <!--                        <i class="fas fa-truck"></i>-->
                <!--                    </p>-->
                <!--                    <p class="order-step&#45;&#45;status">Đang giao hàng</p>-->
                <!--                    <p class="order-step&#45;&#45;time">11:14 11:11:2021</p>-->
                <!--                </div>-->
                <!--                <div class="order-step&#45;&#45;item current">-->
                <!--                    <p class="order-step&#45;&#45;icon circle">-->
                <!--                        <i class="fas fa-dolly-flatbed"></i>-->
                <!--                    </p>-->
                <!--                    <p class="order-step&#45;&#45;status">Chờ xác nhận</p>-->
                <!--                    <p class="order-step&#45;&#45;time">11:14 11:11:2021</p>-->
                <!--                </div>-->
                <!--                <div class="order-step&#45;&#45;item">-->
                <!--                    <p class="order-step&#45;&#45;icon circle">-->
                <!--                        <i class="far fa-star"></i>-->
                <!--                    </p>-->
                <!--                    <p class="order-step&#45;&#45;status">Đánh giá</p>-->
                <!--                    <p class="order-step&#45;&#45;time">11:14 11:11:2021</p>-->
                <!--                </div>-->
                <!--                <div class="order-step&#45;&#45;item">-->
                <!--                    <p class="order-step&#45;&#45;icon circle">-->
                <!--                        <i class="far fa-window-close"></i>-->
                <!--                    </p>-->
                <!--                    <p class="order-step&#45;&#45;status">Đánh giá</p>-->
                <!--                    <p class="order-step&#45;&#45;time">11:14 11:11:2021</p>-->
                <!--                </div>-->
            </div>
            <div class="order-detail-control">
                <button class="order-detail-control--btn btn btn__white">(Shop bấm trực tiếp status update status)
                    Save
                </button>
                <button class="order-detail-control--btn btn btn__white">Liên hệ người bán</button>
                <button class="order-detail-control--btn btn btn__white">Hủy đơn hàng</button>
            </div>
        </div>
        <div class="top-envelope"></div>
        <div class="order-detail-info">
            <p th:text="${order.user.username}" class="order-detail-info--name">[User Name]</p>
            <p th:text="${order.user.phone}" class="order-detail-info--phone">[User Phone]</p>
            <p th:text="${order.address.getFullAddress()}"
               class="order-detail-info--address">[User Full Address]</p>
        </div>
        <div class="order-shop">
            <p th:text="${order.shop.name}" class="order-shop--name">[Shop Name]</p>
            <a th:href="@{/shop/{id}(id=${order.shop.id})}"
               class="order-shop--btn order-shop--btn__visit btn btn__primary">
                <i class="fas fa-store"></i> Ghé thăm shop
            </a>
            <!-- <p class="order-shop--status">Status</p> -->
        </div>
        <ul class="order-detail-list">
            <li th:each="orderDetail : ${order.orderDetails}" class="order-item">
                <p class="pic order-item--pic"><img src="/img/products/product_01.jpg"
                                                    alt=""></p>
                <div class="order-item--text">
                    <p th:text="${orderDetail.product.name}" class="order-item--name">[Product Name]</p>
                    <p class="order-item--category">
                        <span>Category:</span>
                        <span th:text="${orderDetail.product.category.name}">[Category Name]</span>
                    </p>
                    <p class="order-item--quantity">
                        <span>x</span>
                        <span th:text="${orderDetail.quantity}">[Order Quantity]</span>
                    </p>
                </div>
                <p class="order-item--price">
                    <span th:text="${orderDetail.lastPrice}"></span>
                    <span> vnđ</span>
                </p>
            </li>
        </ul>
        <ul class="order-summary">
            <li class="order-summary--item">
                <p>Tổng tiền hàng</p>
                <p>
                    <span th:text="${order.calTotal()}">
                        [Order Total]
                    </span>
                    <span> vnđ</span>
                </p>
            </li>
            <div class="order-summary--item">
                <p>Phí vận chuyển</p>
                <p>
                    <span th:text="${order.shippingCost}">[Order Shipping]</span>
                    <span> vnđ</span>
                </p>
            </div>
            <div class="order-summary--item order-summary--item__total">
                <p>Tổng số tiền</p>
                <p>
                    <span th:text="${order.calTotal().add(order.shippingCost)}">[Summary Total]</span>
                    <span>vnđ</span>
                </p>
            </div>
            <div class="order-summary--item">
                <p>Phương thức thanh toán</p>
                <p th:switch="${order.methodPayment}">
                    <span th:case="true">Thẻ tín dụng / ghi nợ</span>
                    <span th:case="false">Thanh toán khi nhận hàng</span>
                </p>
            </div>
        </ul>
    </div>
</div>
</body>
</html>